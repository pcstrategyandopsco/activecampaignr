# activecampaignr

A **tidy**, **cached**, and **MCP-ready** R client for the
[ActiveCampaign API
v3](https://developers.activecampaign.com/reference/overview).

## Why This Package?

This package builds on the foundation laid by
[`ractivecampaign`](https://github.com/rwColumn/ractivecampaign), which
pioneered R access to the ActiveCampaign API. We’re grateful for that
work — it proved the value of an R-native AC client and informed many of
the patterns used here.

However, production use at scale revealed gaps that warranted a
ground-up rebuild:

- **Broader API coverage** — `ractivecampaign` covers deals and
  contacts; production CRM pipelines need accounts, campaigns, tasks,
  tags, lists, automations, and webhooks
- **Automatic pagination** — Fetching thousands of records shouldn’t
  require manual offset loops
- **Caching and incremental sync** — Repeated API calls for unchanged
  data waste time and hit rate limits; this package caches to RDS and
  only fetches recent changes
- **Modern HTTP backend** — Built on httr2 with native rate limiting
  (`req_throttle`) and retry with exponential backoff (`req_retry`),
  replacing manual
  [`Sys.sleep()`](https://rdrr.io/r/base/Sys.sleep.html) and `retry()`
  calls
- **Custom field pivot** — ActiveCampaign stores custom fields in long
  format (one row per field); this package provides wide format out of
  the box (one row per entity, one column per field)
- **MCP integration** — Expose your CRM as tools for AI assistants via
  mcptools, enabling natural language queries against your deal and
  contact data
- **Write operations** — Full CRUD (create, read, update, delete) for
  all entities, not just read

## Features

- **Tidy outputs** — All functions return tibbles with snake_case
  columns
- **Automatic pagination** — Fetch thousands of records without manual
  page handling
- **Rate limiting & retry** — Built-in throttling (4 req/sec) and
  exponential backoff
- **RDS caching** — Incremental sync fetches only recent changes
- **Full CRUD** — Read, create, update, delete for deals, contacts,
  tags, and more
- **Custom fields** — Wide-format pivot (one row per entity, one column
  per field)
- **MCP server** — Expose your CRM as tools for AI assistants via
  mcptools
- **NZ/AU phone normalization** — Standardize phone numbers for matching

## Installation

``` r

# Install from GitHub
# install.packages("pak")
pak::pak("pcstrategyandopsco/activecampaignr")
```

## Quick Start

``` r

library(activecampaignr)

# Authenticate
ac_auth(
  url = "https://yourname.api-us1.com",
  api_key = "your-api-key"
)
# Or: ac_auth_from_env()  # reads ACTIVECAMPAIGN_URL + ACTIVECAMPAIGN_API_KEY

# Fetch deals
deals <- ac_deals()
won_deals <- ac_deals(status = 1)

# Custom fields in wide format
cf <- ac_deal_custom_fields_wide()

# Incremental sync with caching
result <- ac_sync_deals()
deals <- result$deals
```

## Vignettes

- [Getting
  Started](https://pcstrategyandopsco.github.io/activecampaignr/vignettes/getting-started.Rmd)
  — Auth, first API call, caching
- [Caching and
  Sync](https://pcstrategyandopsco.github.io/activecampaignr/vignettes/caching-and-sync.Rmd)
  — Incremental sync, parallel with future
- [MCP
  Integration](https://pcstrategyandopsco.github.io/activecampaignr/vignettes/mcp-integration.Rmd)
  — AI assistant tool setup
- [Pipeline
  Analysis](https://pcstrategyandopsco.github.io/activecampaignr/vignettes/pipeline-analysis.Rmd)
  — Win rates, velocity, PowerPoint reports
- [Shiny Deal
  Dashboard](https://pcstrategyandopsco.github.io/activecampaignr/vignettes/shiny-deal-dashboard.Rmd)
  — Interactive deal explorer
- [Campaign
  ROI](https://pcstrategyandopsco.github.io/activecampaignr/vignettes/campaign-roi.Rmd)
  — Campaign performance Word report

## Acknowledgements

This package was inspired by and builds on the work of
[`ractivecampaign`](https://github.com/rwColumn/ractivecampaign). Thank
you for making ActiveCampaign accessible to the R community.

## License

MIT

# Package index

## Authentication

- [`ac_auth()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_auth.md)
  : ActiveCampaign Authentication
- [`ac_auth_from_env()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_auth_from_env.md)
  : Authenticate from Environment Variables

## Deals

- [`ac_deals()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deals.md)
  : ActiveCampaign Deals
- [`ac_deal()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deal.md)
  : Get a Single Deal
- [`ac_create_deal()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_create_deal.md)
  : Create a Deal
- [`ac_update_deal()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_update_deal.md)
  : Update a Deal
- [`ac_delete_deal()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_delete_deal.md)
  : Delete a Deal

## Deal Custom Fields

- [`ac_deal_custom_fields()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deal_custom_fields.md)
  : ActiveCampaign Deal Custom Fields
- [`ac_deal_custom_field_values()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deal_custom_field_values.md)
  : Get All Deal Custom Field Values
- [`ac_deal_custom_fields_wide()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deal_custom_fields_wide.md)
  : Get Deal Custom Fields in Wide Format

## Deal Activities

- [`ac_deal_activities()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deal_activities.md)
  : ActiveCampaign Deal Activities
- [`ac_deal_won_date()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deal_won_date.md)
  : Extract the Actual Won Date for a Deal
- [`ac_deal_won_dates()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deal_won_dates.md)
  : Batch Extract Won Dates for Multiple Deals

## Pipelines & Stages

- [`ac_deal_pipelines()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deal_pipelines.md)
  : ActiveCampaign Deal Pipelines and Stages
- [`ac_deal_stages()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_deal_stages.md)
  : List Deal Stages

## Contacts

- [`ac_contacts()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_contacts.md)
  : ActiveCampaign Contacts
- [`ac_contact()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_contact.md)
  : Get a Single Contact
- [`ac_create_contact()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_create_contact.md)
  : Create a Contact
- [`ac_update_contact()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_update_contact.md)
  : Update a Contact

## Contact Custom Fields

- [`ac_contact_custom_fields()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_contact_custom_fields.md)
  : ActiveCampaign Contact Custom Fields
- [`ac_contact_custom_fields_wide()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_contact_custom_fields_wide.md)
  : Get Contact Custom Fields in Wide Format

## Contact Tags

- [`ac_contact_tags()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_contact_tags.md)
  : ActiveCampaign Contact Tags
- [`ac_add_tag()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_add_tag.md)
  : Add a Tag to a Contact
- [`ac_remove_tag()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_remove_tag.md)
  : Remove a Tag from a Contact

## Accounts

- [`ac_accounts()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_accounts.md)
  : ActiveCampaign Accounts
- [`ac_create_account()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_create_account.md)
  : Create an Account

## Campaigns

- [`ac_campaigns()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_campaigns.md)
  : ActiveCampaign Campaigns
- [`ac_campaign_messages()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_campaign_messages.md)
  : Get Campaign Messages

## Tasks

- [`ac_tasks()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_tasks.md)
  : ActiveCampaign Tasks
- [`ac_create_task()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_create_task.md)
  : Create a Task
- [`ac_update_task()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_update_task.md)
  : Update a Task

## Tags

- [`ac_tags()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_tags.md)
  : ActiveCampaign Tags
- [`ac_create_tag()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_create_tag.md)
  : Create a Tag

## Lists

- [`ac_lists()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_lists.md)
  : ActiveCampaign Lists
- [`ac_list_contacts()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_list_contacts.md)
  : Get Contacts on a List

## Users

- [`ac_users()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_users.md)
  : ActiveCampaign Users

## Automations

- [`ac_automations()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_automations.md)
  : ActiveCampaign Automations
- [`ac_trigger_automation()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_trigger_automation.md)
  : Trigger an Automation for a Contact

## Webhooks

- [`ac_webhooks()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_webhooks.md)
  : ActiveCampaign Webhooks
- [`ac_create_webhook()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_create_webhook.md)
  : Create a Webhook
- [`ac_delete_webhook()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_delete_webhook.md)
  : Delete a Webhook

## Caching & Sync

- [`ac_sync`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_sync.md)
  : ActiveCampaign Incremental Sync
- [`ac_sync_deals()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_sync_deals.md)
  : Incremental Deal Sync
- [`ac_sync_contacts()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_sync_contacts.md)
  : Incremental Contact Sync
- [`ac_cache_path()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_cache_path.md)
  : Get or Set the Cache Directory
- [`ac_cache_clear()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_cache_clear.md)
  : Clear the Cache
- [`ac_cache_status()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_cache_status.md)
  : Show Cache Status

## MCP Server

- [`ac_mcp_server()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_mcp_server.md)
  : ActiveCampaign MCP Server

## Utilities

- [`ac_utils`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_utils.md)
  : ActiveCampaign Utilities
- [`ac_standardize_phone()`](https://pcstrategyandopsco.github.io/activecampaignr/reference/ac_standardize_phone.md)
  : Standardize Phone Number (NZ/AU)

# Articles

### Getting Started

- [Getting Started with
  activecampaignr](https://pcstrategyandopsco.github.io/activecampaignr/articles/getting-started.md):
- [Caching and Incremental
  Sync](https://pcstrategyandopsco.github.io/activecampaignr/articles/caching-and-sync.md):

### Integrations

- [MCP Integration for AI
  Assistants](https://pcstrategyandopsco.github.io/activecampaignr/articles/mcp-integration.md):

### Analysis Examples

- [Pipeline Analysis with
  officer](https://pcstrategyandopsco.github.io/activecampaignr/articles/pipeline-analysis.md):
- [Interactive Deal Dashboard with
  Shiny](https://pcstrategyandopsco.github.io/activecampaignr/articles/shiny-deal-dashboard.md):
- [Campaign ROI Report with
  officer](https://pcstrategyandopsco.github.io/activecampaignr/articles/campaign-roi.md):
